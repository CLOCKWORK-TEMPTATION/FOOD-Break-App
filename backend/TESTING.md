# ๐งช ุฏููู ุงูุงุฎุชุจุงุฑุงุช ุงูุดุงูู - BreakApp Backend

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุนุฏุงุฏ ูุธุงู ุงุฎุชุจุงุฑุงุช ุดุงูู ูุบุทู ุซูุงุซุฉ ูุณุชููุงุช:
1. **Unit Tests** - ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช ููุฎุฏูุงุช ุงููุฑุฏูุฉ
2. **Integration Tests** - ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ูู API Endpoints
3. **E2E Tests** - ุงุฎุชุจุงุฑุงุช End-to-End ููุณููุงุฑูููุงุช ุงููุงููุฉ

## ๐ ุฅุญุตุงุฆูุงุช ุงูุงุฎุชุจุงุฑุงุช

| ุงูููุน | ุนุฏุฏ ุงูุงุฎุชุจุงุฑุงุช | ุงูุญุงูุฉ |
|-------|---------------|--------|
| Unit Tests | 115+ | โ ูุฌุงุญ |
| Integration Tests | 100+ | โ ูุฌุงุญ |
| E2E Tests | 63+ | โ ูุฌุงุญ |
| **ุงููุฌููุน** | **278+** | โ ูุฌุงุญ |

## ๐ ูููู ูุฌูุฏุงุช ุงูุงุฎุชุจุงุฑุงุช

```
backend/
โโโ tests/                      # ุงุฎุชุจุงุฑุงุช Jest ุงููุฏููุฉ
โ   โโโ fixtures/
โ   โ   โโโ testData.js          # ุจูุงูุงุช ุงูุงุฎุชุจุงุฑ ุงูุซุงุจุชุฉ
โ   โโโ helpers/
โ   โ   โโโ testHelpers.js       # ุฏูุงู ูุณุงุนุฏุฉ ููุงุฎุชุจุงุฑุงุช
โ   โโโ unit/
โ   โ   โโโ services/
โ   โ       โโโ authService.test.js      # ุงุฎุชุจุงุฑุงุช ุงููุตุงุฏูุฉ
โ   โ       โโโ orderService.test.js     # ุงุฎุชุจุงุฑุงุช ุงูุทูุจุงุช
โ   โ       โโโ menuService.test.js      # ุงุฎุชุจุงุฑุงุช ุงูููุงุฆู
โ   โ       โโโ paymentService.test.js   # ุงุฎุชุจุงุฑุงุช ุงููุฏููุนุงุช
โ   โ       โโโ qrCodeService.test.js    # ุงุฎุชุจุงุฑุงุช QR Code
โ   โโโ integration/
โ   โ   โโโ api/
โ   โ       โโโ auth.test.js             # ุงุฎุชุจุงุฑุงุช API ุงููุตุงุฏูุฉ
โ   โ       โโโ orders.test.js           # ุงุฎุชุจุงุฑุงุช API ุงูุทูุจุงุช
โ   โ       โโโ admin.test.js            # ุงุฎุชุจุงุฑุงุช API ุงูุฅุฏุงุฑุฉ
โ   โโโ e2e/
โ   โ   โโโ userJourney.test.js          # ุฑุญูุฉ ุงููุณุชุฎุฏู ุงููุงููุฉ
โ   โ   โโโ adminJourney.test.js         # ุฑุญูุฉ ุงููุณุคูู ุงููุงููุฉ
โ   โโโ utils/
โ       โโโ jwt.test.js                  # ุงุฎุชุจุงุฑุงุช JWT
โ
โโโ src/__tests__/              # ุงุฎุชุจุงุฑุงุช ุฅุถุงููุฉ
    โโโ unit/
    โ   โโโ authService.test.js     # ุงุฎุชุจุงุฑุงุช ุฎุฏูุฉ ุงููุตุงุฏูุฉ
    โ   โโโ orderService.test.js    # ุงุฎุชุจุงุฑุงุช ุฎุฏูุฉ ุงูุทูุจุงุช
    โ   โโโ nutritionService.test.js # ุงุฎุชุจุงุฑุงุช ุฎุฏูุฉ ุงูุชุบุฐูุฉ
    โโโ integration/
    โ   โโโ auth.routes.test.js     # ุงุฎุชุจุงุฑุงุช API ุงููุตุงุฏูุฉ
    โ   โโโ orders.routes.test.js   # ุงุฎุชุจุงุฑุงุช API ุงูุทูุจุงุช
    โโโ e2e/
    โ   โโโ user-journey.e2e.test.js # ุงุฎุชุจุงุฑุงุช ุฑุญูุฉ ุงููุณุชุฎุฏู
    โโโ __mocks__/                  # Mocks ูุดุชุฑูุฉ
    โโโ server.test.js              # ุงุฎุชุจุงุฑุงุช ุงูุฎุงุฏู ุงูุฃุณุงุณูุฉ
```

## ๐ ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช

### ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
```bash
npm test
```

### ุชุดุบูู ุงุฎุชุจุงุฑุงุช ูุญุฏุฏุฉ
```bash
# ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช ููุท
npm run test:unit

# ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู ููุท
npm run test:integration

# ุงุฎุชุจุงุฑุงุช E2E ููุท
npm run test:e2e

# ุชุดุบูู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุจุงูุชุฑุชูุจ
npm run test:all
```

### ุชุดุบูู ูุน ุงููุฑุงูุจุฉ
```bash
npm run test:watch
```

### ุชุดุบูู ูุน ุชูุฑูุฑ ุงูุชุบุทูุฉ
```bash
npm run test:coverage
```

### ุชุดุบูู ูุน ุงูุชูุงุตูู
```bash
npm run test:verbose
```

### ุชุดุบูู ููู CI/CD
```bash
npm run test:ci
```

## ๐ ุชูุงุตูู ุงูุงุฎุชุจุงุฑุงุช

### Unit Tests - ุงุฎุชุจุงุฑุงุช ุงููุญุฏุงุช

#### Auth Service (20 ุงุฎุชุจุงุฑ)
- ุงูุชุณุฌูู ุงููุงุฌุญ
- ุฑูุถ ุงูุชุณุฌูู ุจุจุฑูุฏ ููุฌูุฏ
- ุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- ุชุณุฌูู ุงูุฏุฎูู ุงููุงุฌุญ
- ุฑูุถ ูููุฉ ุงููุฑูุฑ ุงูุฎุงุทุฆุฉ
- ุงูุชุญูู ูู Token
- ุฑูุถ Token ููุชูู ุงูุตูุงุญูุฉ
- ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- ุงูุชุญูู ูู ุงูุฃุฏูุงุฑ (ADMIN, PRODUCER, REGULAR, VIP)

#### Order Service (26 ุงุฎุชุจุงุฑ)
- ุฅูุดุงุก ุทูุจ ุตุงูุญ
- ุฑูุถ ุทูุจ ููุทุนู ุบูุฑ ูุดุท
- ุฑูุถ ุฃุตูุงู ุบูุฑ ูุชุงุญุฉ
- ุญุณุงุจ ุงููุฌููุน ุงูุตุญูุญ
- ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
- ุฅูุบุงุก ุงูุทูุจ
- ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช
- ุชุทุจูู ุงูุถุฑูุจุฉ ูุงูุฎุตููุงุช

#### Menu Service (22 ุงุฎุชุจุงุฑ)
- ุฌูุจ ุนูุงุตุฑ ุงููุงุฆูุฉ
- ุงูููุชุฑุฉ ุญุณุจ ุงููุฆุฉ
- ุงูุจุญุซ ุจุงูุงุณู
- ุฅูุดุงุก ุนูุตุฑ ุฌุฏูุฏ
- ุชุญุฏูุซ ุงูุฃุณุนุงุฑ
- ุชุจุฏูู ุงูุชููุฑ
- ุฏุนู ุงููููุฏ ุงูุบุฐุงุฆูุฉ

#### Payment Service (23 ุงุฎุชุจุงุฑ)
- ุฅูุดุงุก Payment Intent
- ูุนุงูุฌุฉ ุงูุฏูุน ุงููุงุฌุญ
- ูุนุงูุฌุฉ ูุดู ุงูุฏูุน
- ุงุณุชุฑุฏุงุฏ ูุงูู/ุฌุฒุฆู
- ุงูุชุญูู ูู ุงููุจุงูุบ
- ุฏุนู ุนุฏุฉ ูุฒูุฏูู (Stripe, PayPal)

#### QR Code Service (24 ุงุฎุชุจุงุฑ)
- ุชูููุฏ ุฑูุฒ QR
- ุชูููุฏ Token ูุดูุฑ
- ุงูุชุญูู ูู Token ุตุงูุญ
- ุฑูุถ Token ููุชูู
- ุฑุจุท ุงููุณุชุฎุฏู ุจุงููุดุฑูุน
- ุฏุนู ุตูุบ ูุชุนุฏุฏุฉ (PNG, SVG)
- ุงูุฃูุงู ูุงูุชุดููุฑ

### Integration Tests - ุงุฎุชุจุงุฑุงุช ุงูุชูุงูู

#### Auth API (31 ุงุฎุชุจุงุฑ)
- POST /api/v1/auth/register
- POST /api/v1/auth/login
- POST /api/v1/auth/refresh
- POST /api/v1/auth/logout
- POST /api/v1/auth/forgot-password
- GET /api/v1/auth/profile
- PUT /api/v1/auth/profile
- PUT /api/v1/auth/change-password
- Rate Limiting
- Security Headers

#### Orders API (36 ุงุฎุชุจุงุฑ)
- POST /api/v1/orders
- GET /api/v1/orders
- GET /api/v1/orders/:id
- PUT /api/v1/orders/:id/status
- POST /api/v1/orders/:id/cancel
- POST /api/v1/orders/:id/reorder
- GET /api/v1/orders/:id/track
- Admin Order Management
- Pagination & Filtering

#### Admin API (33 ุงุฎุชุจุงุฑ)
- GET /api/v1/admin/stats
- GET /api/v1/admin/orders
- PUT /api/v1/admin/orders/:id/status
- GET /api/v1/admin/restaurants
- PUT /api/v1/admin/restaurants/:id/toggle
- GET /api/v1/admin/menu
- PUT /api/v1/admin/menu/:id
- GET /api/v1/admin/users
- POST /api/v1/admin/notifications/send
- Authorization & Audit

### E2E Tests - ุงุฎุชุจุงุฑุงุช End-to-End

#### User Journey (33 ุงุฎุชุจุงุฑ)
**Scenario 1: ุชุณุฌูู ุฌุฏูุฏ ูุงูุทูุจ ุงูุฃูู**
1. ุชุณุฌูู ุงููุณุชุฎุฏู
2. ุชุตูุญ ุงููุทุงุนู ุงููุฑูุจุฉ
3. ุงุฎุชูุงุฑ ูุทุนู
4. ุนุฑุถ ุงููุงุฆูุฉ
5. ุฅุถุงูุฉ ููุณูุฉ
6. ุชูุฏูู ุงูุทูุจ
7. ุงูุฏูุน
8. ุชุฃููุฏ ุงูุทูุจ
9. ุชุชุจุน ุงูุทูุจ
10. ุงุณุชูุงู ุงูุทูุจ

**Scenario 2: ูุณุญ QR Code**
1. ูุณุญ ุงูุฑูุฒ
2. ุงูุชุญูู ูู Token
3. ุงูุชุญูู ูู ุงููุดุฑูุน
4. ุฑุจุท ุงููุณุชุฎุฏู
5. ุนุฑุถ ุงููุงุฆูุฉ
6. ุชูุฏูู ุทูุจ ุถูู ุงูููุช ุงููุญุฏุฏ

**Scenario 3: ุฅุนุงุฏุฉ ุงูุทูุจ ุงูุณุฑูุน**
1. ุชุณุฌูู ุงูุฏุฎูู
2. ุนุฑุถ ุงูุณุฌู
3. ุงุฎุชูุงุฑ ุทูุจ ุณุงุจู
4. ุงูุชุญูู ูู ุงูุชููุฑ
5. ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ

**Scenario 4: ุฅูุบุงุก ุงูุทูุจ**
1. ุนุฑุถ ุงูุทูุจ
2. ุทูุจ ุงูุฅูุบุงุก
3. ุงุณุชุฑุฏุงุฏ ุงููุจูุบ
4. ุฅุดุนุงุฑ ุงูุฅูุบุงุก

**Scenario 5: ุฅุฏุงุฑุฉ ุงูุญุณุงุจ**
1. ุนุฑุถ ุงูููู ุงูุดุฎุตู
2. ุชุญุฏูุซ ุงูุจูุงูุงุช
3. ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
4. ุชูุถููุงุช ุบุฐุงุฆูุฉ

#### Admin Journey (30 ุงุฎุชุจุงุฑ)
**Scenario 1: ุงูุนูููุงุช ุงูููููุฉ**
1. ุชุณุฌูู ุฏุฎูู ุงููุณุคูู
2. ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช
3. ูุฑุงุฌุนุฉ ุงูุทูุจุงุช ุงููุนููุฉ
4. ุชุฃููุฏ ุงูุทูุจุงุช
5. ุนุฑุถ ุงููุณุชุฎุฏููู
6. ุฅุฑุณุงู ุฅุดุนุงุฑุงุช

**Scenario 2: ุฅุฏุงุฑุฉ ุงููุทุงุนู**
1. ุฅุถุงูุฉ ูุทุนู ุฌุฏูุฏ
2. ุฅุถุงูุฉ ุนูุงุตุฑ ุงููุงุฆูุฉ
3. ุชุญุฏูุซ ุงูุฃุณุนุงุฑ
4. ุชุนุทูู ุนูุตุฑ
5. ุชุนุทูู ูุทุนู ูุคูุชุงู
6. ุฅุนุงุฏุฉ ุชูุนูู ูุทุนู

**Scenario 3: ุญู ูุดุงูู ุงูุทูุจุงุช**
1. ุงุณุชูุงู ุดููู
2. ุนุฑุถ ุชูุงุตูู ุงูุทูุจ
3. ุงุณุชุฑุฏุงุฏ ุฌุฒุฆู
4. ุฅุถุงูุฉ ุฑุตูุฏ ุชุนููุถู
5. ุฅุฑุณุงู ุงุนุชุฐุงุฑ
6. ุฅุบูุงู ุงููุดููุฉ

**Scenario 4: ุนูููุงุช ุงูุฅูุชุงุฌ**
1. ุชุณุฌูู ุฏุฎูู ุงูููุชุฌ
2. ุนุฑุถ ุงูุทูุจุงุช ุงููุณูุฏุฉ
3. ุจุฏุก ุงูุชุญุถูุฑ
4. ุชุฌููุฒ ุงูุทูุจ
5. ุชุณููู ููุชูุตูู

**Scenario 5: ุงูุชูุงุฑูุฑ**
1. ุชูุฑูุฑ ูููู
2. ุฃูุถู ุงููุทุงุนู
3. ุงูุฃุตูุงู ุงูุดุงุฆุนุฉ
4. ุชุตุฏูุฑ CSV

## ๐ง ุฅุนุฏุงุฏ ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ

ููู `jest.setup.js` ูุญุชูู ุนูู:
- ูุชุบูุฑุงุช ุงูุจูุฆุฉ ููุงุฎุชุจุงุฑ
- Mock ูู Prisma Client
- Mock ูู Console methods
- Helper functions ุนุงูุฉ

## ๐ฆ ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ (Fixtures)

ููู `fixtures/testData.js` ูุญุชูู ุนูู:
- **users**: ูุณุชุฎุฏููู ุจุฃุฏูุงุฑ ูุฎุชููุฉ
- **restaurants**: ูุทุงุนู ูุดุทุฉ ูุบูุฑ ูุดุทุฉ
- **menuItems**: ุนูุงุตุฑ ูุชุงุญุฉ ูุบูุฑ ูุชุงุญุฉ
- **orders**: ุทูุจุงุช ุจุญุงูุงุช ูุฎุชููุฉ
- **payments**: ูุฏููุนุงุช ููุชููุฉ ููุนููุฉ
- **projects**: ูุดุงุฑูุน QR ูุดุทุฉ

## ๐ ุงุฎุชุจุงุฑุงุช ุงูุฃูุงู

ุงูุงุฎุชุจุงุฑุงุช ุชุบุทู:
- โ ุชุดููุฑ ูููุงุช ุงููุฑูุฑ (bcrypt)
- โ ุงูุชุญูู ูู JWT
- โ ุฑูุถ Token ููุชูู
- โ ุญูุงูุฉ Endpoints ุญุณุจ ุงูุฏูุฑ
- โ ุนุฏู ูุดู passwordHash
- โ Rate Limiting
- โ Audit Logging

## ๐ ุงูุชูุงูู ูุน CI/CD

ููุชุดุบูู ูู CI/CD:
```bash
npm run test:ci
```

ูุฐุง ุงูุฃูุฑ:
- ูุดุบู ุฌููุน ุงูุงุฎุชุจุงุฑุงุช
- ููุดุฆ ุชูุฑูุฑ ุชุบุทูุฉ
- ููุชุฌ ููู junit.xml ููุชูุงุฑูุฑ

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุงุฎุชุจุงุฑุงุช ุชุณุชุฎุฏู Mocks**: ูุชู ูุญุงูุงุฉ Prisma Client ูุชุฌูุจ ุงูุงุนุชูุงุฏ ุนูู ูุงุนุฏุฉ ุจูุงูุงุช ุญููููุฉ.

2. **ุจูุฆุฉ ุงูุงุฎุชุจุงุฑ**: ูุชู ุถุจุท `NODE_ENV=test` ุชููุงุฆูุงู.

3. **Timeout**: ุงูุงุฎุชุจุงุฑุงุช ูุฏููุง timeout ูุฏุชู 15 ุซุงููุฉ.

4. **ุชุบุทูุฉ ุงูููุฏ**: ุงูุชุบุทูุฉ ุงูุญุงููุฉ ุชุนูุณ ุงุฎุชุจุงุฑุงุช Mock. ููุญุตูู ุนูู ุชุบุทูุฉ ุญููููุฉุ ููุฒู ุงุฎุชุจุงุฑุงุช integration ูุน ูุงุนุฏุฉ ุจูุงูุงุช ูุนููุฉ.

## ๐ ุชูุฑูุฑ ุงูุชุบุทูุฉ

ุงูุญุฏ ุงูุฃุฏูู ูุชุบุทูุฉ ุงูููุฏ ุงููุทููุจุฉ:
- **Branches:** 70%
- **Functions:** 70%
- **Lines:** 70%
- **Statements:** 70%

ูุนุฑุถ ุชูุฑูุฑ ุงูุชุบุทูุฉ:
```bash
npm run test:coverage
```

ุณูุชู ุฅูุดุงุก ุชูุฑูุฑ HTML ูู ุงููุฌูุฏ `coverage/lcov-report/index.html`.

## ๐งช Unit Tests - ุชูุงุตูู ุฅุถุงููุฉ

### ุงูุฎุฏูุงุช ุงููุฎุชุจุฑุฉ:

#### 1. AuthService (ุฎุฏูุฉ ุงููุตุงุฏูุฉ)
- โ ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- โ ุชุณุฌูู ุงูุฏุฎูู
- โ ุงูุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู
- โ ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
- โ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
- โ ุงูุชุญูู ูู ุงูุจูุงูุงุช ูุงูุฃูุงู

**ูุซุงู:**
```bash
npm run test:unit -- authService.test.js
```

#### 2. OrderService (ุฎุฏูุฉ ุงูุทูุจุงุช)
- โ ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- โ ุฌูุจ ุงูุทูุจุงุช ูุน ุงูุชุตููุฉ ูุงูู Pagination
- โ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
- โ ุฅูุบุงุก ุงูุทูุจ
- โ ุญุณุงุจ ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช

**ูุซุงู:**
```bash
npm run test:unit -- orderService.test.js
```

#### 3. NutritionService (ุฎุฏูุฉ ุงูุชุบุฐูุฉ)
- โ ุชุณุฌูู ุงูุชุบุฐูุฉ ุงูููููุฉ
- โ ุฌูุจ ุณุฌูุงุช ุงูุชุบุฐูุฉ
- โ ุญุณุงุจ ุงูููู ุงูุบุฐุงุฆูุฉ

**ูุซุงู:**
```bash
npm run test:unit -- nutritionService.test.js
```

## ๐ Integration Tests

### API Endpoints ุงููุฎุชุจุฑุฉ:

#### 1. Auth Routes
- **POST /api/v1/auth/register** - ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
- **POST /api/v1/auth/login** - ุชุณุฌูู ุงูุฏุฎูู
- **GET /api/v1/auth/me** - ุจูุงูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู
- **PUT /api/v1/auth/profile** - ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
- **POST /api/v1/auth/change-password** - ุชุบููุฑ ูููุฉ ุงููุฑูุฑ

**ูุซุงู:**
```bash
npm run test:integration -- auth.routes.test.js
```

#### 2. Orders Routes
- **POST /api/v1/orders** - ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
- **GET /api/v1/orders** - ุฌูุจ ุฌููุน ุงูุทูุจุงุช
- **GET /api/v1/orders/:id** - ุชูุงุตูู ุทูุจ ูุญุฏุฏ
- **PATCH /api/v1/orders/:id/status** - ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ
- **POST /api/v1/orders/:id/cancel** - ุฅูุบุงุก ุงูุทูุจ
- **GET /api/v1/orders/stats/:projectId** - ุฅุญุตุงุฆูุงุช ุงูุทูุจุงุช

**ูุซุงู:**
```bash
npm run test:integration -- orders.routes.test.js
```

## ๐ญ E2E Tests

### ุงูุณููุงุฑูููุงุช ุงููุฎุชุจุฑุฉ:

#### 1. ุฑุญูุฉ ุงููุณุชุฎุฏู ุงููุงููุฉ
1. ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ
2. ุชุณุฌูู ุงูุฏุฎูู
3. ุนุฑุถ ุจูุงูุงุช ุงููุณุชุฎุฏู
4. ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู
5. ุฅูุดุงุก ุทูุจ ุฌุฏูุฏ
6. ุนุฑุถ ุชูุงุตูู ุงูุทูุจ
7. ุนุฑุถ ูุงุฆูุฉ ุงูุทูุจุงุช
8. ุฅูุบุงุก ุงูุทูุจ

#### 2. ูุญุงููุฉ ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู
- ูุญุงููุฉ ุงููุตูู ุจุฏูู ูุตุงุฏูุฉ
- ูุญุงููุฉ ุงููุตูู ุฅูู ููุงุฑุฏ ูุณุชุฎุฏู ุขุฎุฑ

#### 3. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ุฃุฎุทุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุจูุงูุงุช ุบูุฑ ุตุงูุญุฉ
- ูุณุงุฑุงุช ุบูุฑ ููุฌูุฏุฉ

#### 4. ุงูุชุญูู ูู ุงูุฃูุงู
- Security Headers
- CORS Headers
- ุนุฏู ูุดู ุงููุนูููุงุช ุงูุญุณุงุณุฉ

**ูุซุงู:**
```bash
npm run test:e2e -- user-journey.e2e.test.js
```

## ๐๏ธ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

- **Jest** - ุฅุทุงุฑ ุงูุงุฎุชุจุงุฑ ุงูุฑุฆูุณู
- **Supertest** - ุงุฎุชุจุงุฑ HTTP requests
- **Prisma Mock** - ูุญุงูุงุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ูุชุงุจุฉ ุงุฎุชุจุงุฑุงุช ุฌุฏูุฏุฉ

### ูููุฐุฌ Unit Test

```javascript
describe('ServiceName', () => {
  let mockPrisma;

  beforeEach(() => {
    // ุฅุนุฏุงุฏ ุงูู mocks
    mockPrisma = {
      model: {
        findUnique: jest.fn(),
        create: jest.fn(),
      }
    };
  });

  it('ูุฌุจ ุฃู ูููู ุจุงูุนูููุฉ ุจูุฌุงุญ', async () => {
    // Arrange - ุฅุนุฏุงุฏ ุงูุจูุงูุงุช ูุงูู mocks
    mockPrisma.model.findUnique.mockResolvedValue({ id: '1' });

    // Act - ุชูููุฐ ุงูุฏุงูุฉ
    const result = await service.doSomething();

    // Assert - ุงูุชุญูู ูู ุงููุชูุฌุฉ
    expect(result).toBeDefined();
    expect(mockPrisma.model.findUnique).toHaveBeenCalled();
  });
});
```

### ูููุฐุฌ Integration Test

```javascript
describe('POST /api/v1/resource', () => {
  it('ูุฌุจ ุฃู ููุดุฆ ุงูููุฑุฏ ุจูุฌุงุญ', async () => {
    const response = await request(app)
      .post('/api/v1/resource')
      .set('Authorization', `Bearer ${token}`)
      .send({ data: 'test' })
      .expect(201);

    expect(response.body.success).toBe(true);
    expect(response.body.data).toHaveProperty('id');
  });
});
```

## โ๏ธ ุฅุนุฏุงุฏุงุช Jest

ููู `jest.config.js`:
```javascript
module.exports = {
  testEnvironment: 'node',
  coveragePathIgnorePatterns: ['/node_modules/'],
  testMatch: ['**/__tests__/**/*.test.js'],
  coverageThreshold: {
    global: {
      branches: 70,
      functions: 70,
      lines: 70,
      statements: 70,
    },
  },
  setupFilesAfterEnv: ['<rootDir>/jest.setup.js'],
  testTimeout: 10000,
};
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุงุฎุชุจุงุฑุงุช ุชูุดู ุจุณุจุจ timeout

**ุงูุญู:**
```bash
# ุฒูุงุฏุฉ ููุช timeout
jest --testTimeout=30000
```

### ุงููุดููุฉ: Mocks ูุง ุชุนูู ุจุดูู ุตุญูุญ

**ุงูุญู:**
```javascript
// ุชุฃูุฏ ูู ูุณุญ ุงูู mocks ูุจู ูู ุงุฎุชุจุงุฑ
beforeEach(() => {
  jest.clearAllMocks();
});
```

### ุงููุดููุฉ: ุงุฎุชุจุงุฑุงุช E2E ุชุชุฏุงุฎู ูุน ุจุนุถูุง

**ุงูุญู:**
```bash
# ุงุณุชุฎุฏู runInBand ูุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ุจุงูุชุณูุณู
npm run test:e2e
```

## ๐ ุฃูุถู ุงูููุงุฑุณุงุช

1. **ุงูุชุจ ุงุฎุชุจุงุฑุงุช ูุงุถุญุฉ ููููููุฉ**
   - ุงุณุชุฎุฏู ุฃุณูุงุก ูุตููุฉ ููุงุฎุชุจุงุฑุงุช
   - ุงุชุจุน ููุท AAA (Arrange, Act, Assert)

2. **ุงุฎุชุจุฑ ุงูุญุงูุงุช ุงูุญุฑุฌุฉ**
   - ุงุฎุชุจุฑ ุงูุญุงูุงุช ุงููุงุฌุญุฉ ูุงููุงุดูุฉ
   - ุงุฎุชุจุฑ ุงูุญุฏูุฏ ูุงูููู ุงูุฎุงุตุฉ

3. **ุญุงูุธ ุนูู ุงุณุชููุงููุฉ ุงูุงุฎุชุจุงุฑุงุช**
   - ูู ุงุฎุชุจุงุฑ ูุฌุจ ุฃู ูุนูู ุจุดูู ูุณุชูู
   - ูุง ุชุนุชูุฏ ุนูู ุชุฑุชูุจ ุชูููุฐ ุงูุงุฎุชุจุงุฑุงุช

4. **ุงุณุชุฎุฏู Mocks ุจุญููุฉ**
   - Mock ุงูุงุนุชูุงุฏูุงุช ุงูุฎุงุฑุฌูุฉ ููุท
   - ูุง ุชุฎุชุจุฑ ุงูู mocksุ ุงุฎุชุจุฑ ุงูููุฏ ุงููุนูู

5. **ุญุงูุธ ุนูู ุณุฑุนุฉ ุงูุงุฎุชุจุงุฑุงุช**
   - ุงุณุชุฎุฏู mocks ููุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูู API ุงูุฎุงุฑุฌูุฉ
   - ุชุฌูุจ ุงูุนูููุงุช ุงูุซูููุฉ ุบูุฑ ุงูุถุฑูุฑูุฉ

## ๐ CI/CD Integration

### GitHub Actions

```yaml
name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run tests
        run: npm run test:all
      - name: Upload coverage
        uses: codecov/codecov-action@v2
```

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู ูู ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช:

1. ุชุฃูุฏ ูู ุชุซุจูุช ุฌููุน ุงูุชุจุนูุงุช: `npm install`
2. ุชุฃูุฏ ูู ูุฌูุฏ ููู `.env` ูุน ุงููุชุบูุฑุงุช ุงููุทููุจุฉ
3. ุฑุงุฌุน ุงูุณุฌูุงุช (logs) ููุญุตูู ุนูู ุชูุงุตูู ุงูุฎุทุฃ
4. ุชุญูู ูู ุฅุตุฏุงุฑ Node.js (ูุฌุจ ุฃู ูููู 18+)

## ๐ ูุฑุงุฌุน ุฅุถุงููุฉ

- [Jest Documentation](https://jestjs.io/docs/getting-started)
- [Supertest Documentation](https://github.com/visionmedia/supertest)
- [Testing Best Practices](https://github.com/goldbergyoni/javascript-testing-best-practices)

---

**ุขุฎุฑ ุชุญุฏูุซ:** ุฏูุณูุจุฑ 2024
**ุงูุฅุตุฏุงุฑ:** 2.0.0
